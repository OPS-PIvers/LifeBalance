// Preset Habits Configuration
// Effort levels map to base points for habits

import { EffortLevel } from '@/types/schema';

// Consolidated effort level configuration
// Points scale: easy = 1, medium = 2, hard = 3, very_hard = 5
// For negative habits, these become -1, -2, -3, -5
interface EffortConfig {
  points: number;
  label: string;
  colors: { bg: string; text: string };
}

export const EFFORT_CONFIG: Record<EffortLevel, EffortConfig> = {
  easy: {
    points: 1,
    label: 'Easy',
    colors: { bg: 'bg-green-100', text: 'text-green-700' },
  },
  medium: {
    points: 2,
    label: 'Medium',
    colors: { bg: 'bg-yellow-100', text: 'text-yellow-700' },
  },
  hard: {
    points: 3,
    label: 'Hard',
    colors: { bg: 'bg-orange-100', text: 'text-orange-700' },
  },
  very_hard: {
    points: 5,
    label: 'Very Hard',
    colors: { bg: 'bg-red-100', text: 'text-red-700' },
  },
};

// Helper accessors for backwards compatibility
export const EFFORT_POINTS: Record<EffortLevel, number> = {
  easy: EFFORT_CONFIG.easy.points,
  medium: EFFORT_CONFIG.medium.points,
  hard: EFFORT_CONFIG.hard.points,
  very_hard: EFFORT_CONFIG.very_hard.points,
};

export const EFFORT_LABELS: Record<EffortLevel, string> = {
  easy: EFFORT_CONFIG.easy.label,
  medium: EFFORT_CONFIG.medium.label,
  hard: EFFORT_CONFIG.hard.label,
  very_hard: EFFORT_CONFIG.very_hard.label,
};

export const EFFORT_COLORS: Record<EffortLevel, { bg: string; text: string }> = {
  easy: EFFORT_CONFIG.easy.colors,
  medium: EFFORT_CONFIG.medium.colors,
  hard: EFFORT_CONFIG.hard.colors,
  very_hard: EFFORT_CONFIG.very_hard.colors,
};

// Category constant for negative habits
export const NEGATIVE_CATEGORY = 'Negative / Avoidance';

export interface PresetHabit {
  id: string;
  title: string;
  category: string;
  type: 'positive' | 'negative';
  effortLevel: EffortLevel;
  scoringType: 'incremental' | 'threshold';
  period: 'daily' | 'weekly';
  targetCount: number;
  weatherSensitive: boolean;
  description?: string;
}

export const PRESET_HABITS: PresetHabit[] = [
  // ===== ACHIEVEMENTS =====
  {
    id: 'preset_week_no_eating_out',
    title: '1 week without eating out',
    category: 'Achievements',
    type: 'positive',
    effortLevel: 'very_hard',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Complete a full week with no restaurant meals',
  },
  {
    id: 'preset_no_spend_weekend',
    title: 'Complete a no-spend weekend',
    category: 'Achievements',
    type: 'positive',
    effortLevel: 'very_hard',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Spend nothing on Saturday and Sunday',
  },
  {
    id: 'preset_savings_goal',
    title: 'Meet savings goal for the month',
    category: 'Achievements',
    type: 'positive',
    effortLevel: 'very_hard',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Hit your monthly savings target',
  },

  // ===== FINANCIAL PLANNING =====
  {
    id: 'preset_cancel_subscription',
    title: 'Cancel an unused subscription',
    category: 'Financial Planning',
    type: 'positive',
    effortLevel: 'hard',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Cut unnecessary recurring expenses',
  },
  {
    id: 'preset_review_subscription',
    title: 'Review one subscription for necessity',
    category: 'Financial Planning',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Evaluate if a subscription is worth keeping',
  },
  {
    id: 'preset_zero_spend_day',
    title: 'Spend zero money in a day',
    category: 'Financial Planning',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'No spending for the entire day',
  },
  {
    id: 'preset_weekly_budget_review',
    title: 'Weekly budget review',
    category: 'Financial Planning',
    type: 'positive',
    effortLevel: 'hard',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Review spending against budget',
  },

  // ===== HEALTH =====
  {
    id: 'preset_reading_30',
    title: '30 minutes of reading',
    category: 'Health',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Read a book or educational content',
  },
  {
    id: 'preset_below_avg_screen',
    title: 'Below Avg Screen Time',
    category: 'Health',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Keep screen time below your average',
  },
  {
    id: 'preset_drink_water',
    title: 'Drink 1 bottle of water',
    category: 'Health',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 7,
    weatherSensitive: false,
    description: 'Stay hydrated throughout the week',
  },
  {
    id: 'preset_salad_meal',
    title: 'Eat salad for a meal',
    category: 'Health',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Have a healthy salad',
  },
  {
    id: 'preset_exercise_30',
    title: 'Exercise for 30 minutes',
    category: 'Health',
    type: 'positive',
    effortLevel: 'hard',
    scoringType: 'incremental',
    period: 'weekly',
    targetCount: 3,
    weatherSensitive: false,
    description: 'Get at least 30 min of physical activity',
  },
  {
    id: 'preset_sleep_7hrs',
    title: 'Get 7+ hours of sleep',
    category: 'Health',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Get a full night of quality sleep',
  },
  {
    id: 'preset_stretch_break',
    title: 'Take a stretch break',
    category: 'Health',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Get up and stretch during the day',
  },
  {
    id: 'preset_walk_dog',
    title: 'Walk the dog',
    category: 'Health',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: true,
    description: 'Take the dog for a walk',
  },
  {
    id: 'preset_meditate',
    title: 'Meditate',
    category: 'Health',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Practice mindfulness or meditation',
  },

  // ===== HOUSEHOLD =====
  {
    id: 'preset_clean_downstairs_bath',
    title: 'Clean downstairs bathroom',
    category: 'Household',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Thorough bathroom cleaning',
  },
  {
    id: 'preset_clean_shower_door',
    title: 'Clean glass shower door',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Remove water spots and soap scum',
  },
  {
    id: 'preset_clean_kitchen',
    title: 'Clean kitchen thoroughly',
    category: 'Household',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Deep clean the kitchen',
  },
  {
    id: 'preset_clean_fridge',
    title: 'Clean out refrigerator',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Remove old food, wipe shelves',
  },
  {
    id: 'preset_clean_upstairs_bath',
    title: 'Clean upstairs bathroom',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Thorough bathroom cleaning',
  },
  {
    id: 'preset_declutter',
    title: 'Declutter one area',
    category: 'Household',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Organize and remove clutter from one space',
  },
  {
    id: 'preset_dust_surfaces',
    title: 'Dust all surfaces',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Dust furniture and surfaces',
  },
  {
    id: 'preset_laundry',
    title: 'Laundry folded and put away',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Complete the laundry cycle',
  },
  {
    id: 'preset_vacuum',
    title: 'Vacuum downstairs',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Vacuum floors and rugs',
  },
  {
    id: 'preset_wet_swiffer',
    title: 'Wet Swiffer Kitchen',
    category: 'Household',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Mop the kitchen floor',
  },
  {
    id: 'preset_windex_windows',
    title: 'Windex all windows',
    category: 'Household',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Clean all windows and mirrors',
  },
  {
    id: 'preset_wipe_baseboards',
    title: 'Wipe baseboards',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Dust and wipe baseboards',
  },
  {
    id: 'preset_yard_cleanup',
    title: 'Yard cleanup',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: true,
    description: 'General outdoor maintenance',
  },
  {
    id: 'preset_make_bed',
    title: 'Make bed',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Start the day with a tidy bed',
  },
  {
    id: 'preset_dishes',
    title: 'Wash dishes',
    category: 'Household',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Keep the sink empty',
  },

  // ===== MEAL PLANNING =====
  {
    id: 'preset_cook_olive_oil',
    title: 'Cook with olive oil',
    category: 'Meal Planning',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Use healthy cooking oil',
  },
  {
    id: 'preset_eat_leftovers',
    title: 'Eat leftovers',
    category: 'Meal Planning',
    type: 'positive',
    effortLevel: 'hard',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Reduce waste by eating leftovers',
  },
  {
    id: 'preset_veggies_dinner',
    title: 'Eat vegetables with dinner',
    category: 'Meal Planning',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Include veggies with your evening meal',
  },
  {
    id: 'preset_meat_free_day',
    title: 'Have a meat-free day',
    category: 'Meal Planning',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Go vegetarian for a day',
  },
  {
    id: 'preset_homemade_dinner',
    title: 'Homemade dinner',
    category: 'Meal Planning',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Cook dinner at home',
  },
  {
    id: 'preset_lunch_prep',
    title: 'Prep lunch the day before',
    category: 'Meal Planning',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Prepare tomorrow\'s lunch tonight',
  },
  {
    id: 'preset_meal_prep_weekly',
    title: 'Weekly meal prep',
    category: 'Meal Planning',
    type: 'positive',
    effortLevel: 'hard',
    scoringType: 'threshold',
    period: 'weekly',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Prepare meals for the week',
  },

  // ===== SELF-DISCIPLINE =====
  {
    id: 'preset_alarm_grad_school',
    title: 'Get up with alarm for grad school',
    category: 'Self-Discipline',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Wake up on time for school',
  },
  {
    id: 'preset_lights_out_10',
    title: 'Lights out by 10pm',
    category: 'Self-Discipline',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Get to bed at a reasonable hour',
  },
  {
    id: 'preset_grad_school_work',
    title: 'Grad school work (30-60 mins)',
    category: 'Self-Discipline',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Make progress on schoolwork',
  },
  {
    id: 'preset_daily_planning',
    title: 'Plan tomorrow',
    category: 'Self-Discipline',
    type: 'positive',
    effortLevel: 'easy',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Review and set priorities for tomorrow',
  },
  {
    id: 'preset_no_phone_morning',
    title: 'Phone-free morning hour',
    category: 'Self-Discipline',
    type: 'positive',
    effortLevel: 'medium',
    scoringType: 'threshold',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Avoid phone for first hour after waking',
  },

  // ===== NEGATIVE / AVOIDANCE =====
  {
    id: 'preset_busy_nights_row',
    title: '3 busy nights in a row',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Too many consecutive busy evenings',
  },
  {
    id: 'preset_adult_beverage_over2',
    title: 'Any adult beverage over 2',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Having more than 2 drinks',
  },
  {
    id: 'preset_fast_casual',
    title: 'Fast casual or donuts',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Eating fast food or donuts',
  },
  {
    id: 'preset_go_target',
    title: 'Go into Target',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'hard',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Entering the danger zone',
  },
  {
    id: 'preset_dinner_out',
    title: 'Go out to dinner',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'very_hard',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Eating dinner at a restaurant',
  },
  {
    id: 'preset_liquor_store',
    title: 'Go to liquor store',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Trip to buy alcohol',
  },
  {
    id: 'preset_grocery_delivery',
    title: 'Grocery delivery',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Paying for grocery delivery fees',
  },
  {
    id: 'preset_hit_snooze',
    title: 'Hit snooze',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Hitting the snooze button',
  },
  {
    id: 'preset_impulse_buy',
    title: 'Impulse buy',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Unplanned, unnecessary purchases',
  },
  {
    id: 'preset_lights_after_1030',
    title: 'Lights out after 10:30pm',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Staying up too late',
  },
  {
    id: 'preset_missed_meds',
    title: 'Missed afternoon meds',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Forgetting to take medication',
  },
  {
    id: 'preset_food_delivery',
    title: 'Order food for delivery',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'very_hard',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'The most expensive way to eat',
  },
  {
    id: 'preset_online_shopping',
    title: 'Order from Target/Amazon',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Online shopping temptation',
  },
  {
    id: 'preset_starbucks',
    title: 'Starbucks/coffee/fast snack',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Buying coffee or quick snacks out',
  },
  {
    id: 'preset_unnecessary_large',
    title: 'Unnecessary Spending (Large)',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'hard',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Big unplanned purchases',
  },
  {
    id: 'preset_wasted_hellofresh',
    title: 'Wasted Hello Fresh meal',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'hard',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Letting a meal kit go to waste',
  },
  {
    id: 'preset_grad_school_3hrs',
    title: 'Work on grad school 3+ hours',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Overworking on schoolwork',
  },
  {
    id: 'preset_late_snack',
    title: 'Late night snacking',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'easy',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Eating after 9 PM',
  },
  {
    id: 'preset_social_media',
    title: 'Excessive social media',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Spending too much time scrolling',
  },
  {
    id: 'preset_skip_workout',
    title: 'Skip planned workout',
    category: 'Negative / Avoidance',
    type: 'negative',
    effortLevel: 'medium',
    scoringType: 'incremental',
    period: 'daily',
    targetCount: 1,
    weatherSensitive: false,
    description: 'Skipping a workout you had planned',
  },
];

// Categories in display order
export const HABIT_CATEGORIES = [
  'Health',
  'Meal Planning',
  'Household',
  'Financial Planning',
  'Self-Discipline',
  'Achievements',
  'Negative / Avoidance',
];

// Helper to get preset habits grouped by category
export const getPresetHabitsByCategory = (): Record<string, PresetHabit[]> => {
  const result: Record<string, PresetHabit[]> = {};

  // Initialize in display order
  HABIT_CATEGORIES.forEach(cat => {
    result[cat] = [];
  });

  // Add habits to their categories
  PRESET_HABITS.forEach(habit => {
    if (result[habit.category]) {
      result[habit.category].push(habit);
    } else {
      result[habit.category] = [habit];
    }
  });

  // Remove empty categories
  Object.keys(result).forEach(key => {
    if (result[key].length === 0) {
      delete result[key];
    }
  });

  return result;
};

// Helper to find a preset habit by ID
export const findPresetHabit = (id: string): PresetHabit | undefined => {
  return PRESET_HABITS.find(h => h.id === id);
};
