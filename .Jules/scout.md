## 2024-05-22 - Habit Logic Unit Test Coverage **Gap:** `utils/habitLogic.ts` had 0% coverage, and a critical bug existed where habits with count 1 could not be decremented to 0 because of an incorrect guard clause checking the *resulting* count instead of the *initial* count. **Fix:** Created `utils/habitLogic.test.ts` using Vitest to cover `isHabitStale`, `calculateStreak`, `getMultiplier`, and `processToggleHabit`. Identified and fixed the bug in `habitLogic.ts` by changing the guard clause to `if (habit.count === 0)`.
## 2024-05-23 - Edit Transaction Modal Coverage **Gap:** `components/modals/EditTransactionModal.tsx` had extremely low coverage (1.19%) despite being a critical user interaction component. **Fix:** Created `components/modals/EditTransactionModal.test.tsx` using Vitest and React Testing Library. Mocked `useHousehold` and `react-hot-toast` (using `vi.hoisted` for correct mock initialization) to verify rendering, validation, updates, deletion, and duplication flows. Coverage increased to 73.8%.
